<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AutoFTARM • AutoFTRAM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="AutoFTARM">
<meta property="og:description" content="AutoFTRAM">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">AutoFTRAM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/FTARM.html">AutoFTARM</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/skirwa/AutoFTRAM/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>AutoFTARM</h1>
            
            <h4 data-toc-skip class="date">2022-12-13</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/skirwa/AutoFTRAM/blob/HEAD/vignettes/FTARM.Rmd" class="external-link"><code>vignettes/FTARM.Rmd</code></a></small>
      <div class="hidden name"><code>FTARM.Rmd</code></div>

    </div>

    
    
<p><code>FTARM</code> (Fast Top-K Association Rule Mining) is a proposed
algorithm that does association rule mining. Association rule mining is
a branch of data mining that deals with the identification of useful
patterns within a given dataset. Compared with other existing algorithms
that do association rule mining, <code>FTARM</code> is said to be more
efficient. <code>FTARM</code> automates most of its procedures and,
thus, it produces patterns with higher accuracy. <code>AutoFTARM</code>
intends to further improve the accuracy of FTARM by fully automating the
algorithm.</p>
<p>Below is a demonstration of <code>FTARM's</code> performance compared
to the performance of other algorithms that do association rule mining.
As seen in figure 1 below, for different datasets (Pumsb and Connect),
FTARM has better runtime and lower memory consumption compared to
TopKrules and ETARM algorithms (Liu et al., 2021). Its better
performance is owed to the fact that it produces much less rules that
are more interpretable (Liu et al., 2021).</p>
<div class="figure">
<img src="../../../../Pictures/Screenshots/FTARM.png" alt=""><p class="caption">Figure 1: FTARM’s Performance</p>
</div>
<div class="section level2">
<h2 id="significance-of-autoftarm">Significance of AutoFTARM<a class="anchor" aria-label="anchor" href="#significance-of-autoftarm"></a>
</h2>
<p>There is only one algorithm (<code>apriori</code>) in R programming
language that does association rule mining. The <code>apriori</code>
algorithm is found inside the <code>arules</code> package. With
<code>apriori</code>, the user is required to provide the key parameters
(<code>minimum support</code> and <code>minimum confidence</code>) that
determine the number of rules (patterns) that are generated by the
algorithm. This is a major drawback with <code>apriori</code>, as well
as with the other existing algorithms, because it is quite tedious for
the users to keep on adjusting the parameters till they find the optimum
parameters that produces the best model that contains the desired set of
rules. The proposed <code>FTARM</code> algorithm eliminates the need for
the user to provide the minimum support value, however, the user is
still required to provide the minimum confidence value. Therefore, our
proposed <code>AutoFTARM</code> package intends to completely automate
the FTARM algorithm by eliminating the need for the user to provide any
of the key parameters used in association rule mining.</p>
</div>
<div class="section level2">
<h2 id="demonstration-of-association-rule-mining">Demonstration of association rule mining<a class="anchor" aria-label="anchor" href="#demonstration-of-association-rule-mining"></a>
</h2>
<p>We used the existing <code>Apriori</code> algorithm to demonstrate
association rule mining and to show how the <code>FTARM</code> algorithm
is expected to work after it’s successful implementation:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mhahsler/arules" class="external-link">arules</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mhahsler/arulesViz" class="external-link">arulesViz</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">RColorBrewer</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load data</span></span>
<span><span class="co"># The arules package comes with the 'Groceries' dataset.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">Groceries</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generates the items that frequently appears in the dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/arules/man/itemFrequencyPlot.html" class="external-link">itemFrequencyPlot</a></span><span class="op">(</span><span class="va">Groceries</span>, topN <span class="op">=</span> <span class="fl">15</span>, type <span class="op">=</span> <span class="st">"absolute"</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">brewer.pal</a></span><span class="op">(</span><span class="fl">8</span>,<span class="st">'Dark2'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="FTARM_files/figure-html/unnamed-chunk-3-1.png" width="480" style="display: block; margin: auto auto auto 0;"></p>
<p>As pointed out above, the minimum support and minimum confidence
values are important as they determine the number of rules generated. We
used different sets of values to demonstrate the effect that the two
input parameters have on the number of rules generated.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Performing apriori with minimum support=0.002 and minimum confidence=0.05</span></span>
<span><span class="va">model1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/arules/man/apriori.html" class="external-link">apriori</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">Groceries</span>, </span>
<span>                parameter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>support<span class="op">=</span><span class="fl">0.002</span>, confidence<span class="op">=</span><span class="fl">0.05</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Performing apriori with minimum support=0.01 and minimum confidence=0.03</span></span>
<span><span class="va">model2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/arules/man/apriori.html" class="external-link">apriori</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">Groceries</span>, </span>
<span>                parameter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>support<span class="op">=</span><span class="fl">0.01</span>, confidence<span class="op">=</span><span class="fl">0.03</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">model1</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">brewer.pal</a></span><span class="op">(</span><span class="fl">12</span>,<span class="st">'Paired'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="FTARM_files/figure-html/unnamed-chunk-6-1.png" width="480" style="display: block; margin: auto auto auto 0;"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">model2</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">brewer.pal</a></span><span class="op">(</span><span class="fl">12</span>,<span class="st">'Paired'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="FTARM_files/figure-html/unnamed-chunk-7-1.png" width="480" style="display: block; margin: auto auto auto 0;"></p>
<p>With minimum support of 0.002 and minimum confidence of 0.05, 10124
rules are generated by the apriori algorithm. Interpreting and
visualizing all the rules is quite challenging because they are quite
many. As seen in the scatterplots, there is a lot of overlap when
visualizing a large number of rules. Also, with smaller number of rules,
visualizing them is a challenging. We tried clustering the rules, but it
does a poor job in visualizing rules. Thus, we noted that there is need
for a better way to visualize generated rules that promotes
interpretability.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Visualization of some of the rules based on their lift values.</span></span>
<span><span class="va">sampleRules</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/arules/man/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">model2</span>,by<span class="op">=</span><span class="st">"lift"</span><span class="op">)</span>,<span class="fl">20</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sampleRules</span>, method<span class="op">=</span><span class="st">"graph"</span>,control<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type<span class="op">=</span><span class="st">"items"</span><span class="op">)</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html" class="external-link">brewer.pal</a></span><span class="op">(</span><span class="fl">8</span>,<span class="st">'Dark2'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Available control parameters (with default values):</span></span>
<span><span class="co">#&gt; layout    =  stress</span></span>
<span><span class="co">#&gt; circular  =  FALSE</span></span>
<span><span class="co">#&gt; ggraphdots    =  NULL</span></span>
<span><span class="co">#&gt; edges     =  &lt;environment&gt;</span></span>
<span><span class="co">#&gt; nodes     =  &lt;environment&gt;</span></span>
<span><span class="co">#&gt; nodetext  =  &lt;environment&gt;</span></span>
<span><span class="co">#&gt; colors    =  c("#EE0000FF", "#EEEEEEFF")</span></span>
<span><span class="co">#&gt; engine    =  ggplot2</span></span>
<span><span class="co">#&gt; max   =  100</span></span>
<span><span class="co">#&gt; verbose   =  FALSE</span></span></code></pre>
<p><img src="FTARM_files/figure-html/unnamed-chunk-8-1.png" width="480" style="display: block; margin: auto auto auto 0;"></p>
</div>
<div class="section level2">
<h2 id="demonstration-of-autoftarm">Demonstration of AutoFTARM<a class="anchor" aria-label="anchor" href="#demonstration-of-autoftarm"></a>
</h2>
<p>Our success was dependent on the implementation and functioning of
the <code>FTARM</code> algorithm. However, given that only the pseudo
code for <code>FTARM</code> existed, we had to implement the algorithm
from the ground up. <code>FTARM</code> is dependent on many functions
for it to work. We implemented all the functions needed by
<code>FTARM</code>, however, only a number of them were successful.</p>
<p>We used the <a href="2.%20https://grouplens.org/datasets/movielens/" class="external-link">movie_lens</a>
dataset, which is publicly available. Only a subset of the data, with
400 observations was used. The sample data contains a list of movies
that the users gave a rating of 5. The sample data was stored in a csv
file named <code>movie_ratings.csv</code>, which is available on our <a href="https://github.com/skirwa/AutoFTRAM" class="external-link">github</a> repository.</p>
<div class="section level3">
<h3 id="demonstration-ftarms-dependent-functions-that-were-successfully-implemented">Demonstration FTARM’s dependent functions that were successfully
implemented:<a class="anchor" aria-label="anchor" href="#demonstration-ftarms-dependent-functions-that-were-successfully-implemented"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Loading sample data</span></span>
<span><span class="va">data_sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"C:/Users/skirw/Desktop/Academics/AutoFTRAM/movie_ratings.csv"</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<code>tids()</code> and <code>tidsForTwo()</code> - tids stands for
transaction identifier of a set of items. These functions will be
replaced in the future with one function that takes in a list of items,
instead of only one or two items.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># tids is the transaction identifier of a set of items.</span></span>
<span><span class="co"># tids determine how frequently an item appears in the transactions.</span></span>
<span><span class="va">tids</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">searchFor</span>, <span class="va">DB</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># movie_ratings implementation: count how many users watched a certain movie.</span></span>
<span>  <span class="va">DB</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">DB</span><span class="op">)</span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">DB</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="va">searchFor</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">total</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>  <span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="va">result</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="va">i</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">total</span> <span class="op">&lt;-</span> <span class="va">total</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># The outcome tells us that 9 users have watched the movie 'Toy Story' (with movie_id = 1). </span></span>
<span><span class="fu">tids</span><span class="op">(</span><span class="fl">1</span>, <span class="va">data_sample</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 9</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tidsForTwo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">searchFor1</span>, <span class="va">searchFor2</span>, <span class="va">DB</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># calculate the number of columns or transactions that contain x and y</span></span>
<span>  <span class="va">DB</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">DB</span><span class="op">)</span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">DB</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="va">searchFor1</span><span class="op">)</span> <span class="op">!=</span> <span class="fl">0</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">x</span> <span class="op">==</span> <span class="va">searchFor2</span><span class="op">)</span> <span class="op">!=</span> <span class="fl">0</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">total</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>  <span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="va">result</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="va">i</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">total</span> <span class="op">&lt;-</span> <span class="va">total</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># The outcome tells us that 3 users have watched both 'Toy Story' (id = 1), and 'Grumpier' (id=3).</span></span>
<span><span class="fu">tidsForTwo</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="va">data_sample</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 3</span></span></code></pre>
<ul>
<li>
<code>sup()</code> - Used to calculate the support value of an item
in the dataset. This function helps to generate rules (patterns).</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the support value for an item.</span></span>
<span><span class="co"># Support is the no of transactions (I) in DB with item i / total number of transactions in DB. </span></span>
<span><span class="va">sup</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">DB</span>, <span class="va">i</span><span class="op">)</span> <span class="op">{</span></span>
<span>    </span>
<span>  <span class="va">support</span> <span class="op">&lt;-</span> <span class="fu">tids</span><span class="op">(</span><span class="va">i</span>, <span class="va">DB</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">DB</span><span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">support</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># The support of the movie 'Shawshank Redemption' is 0.35</span></span>
<span><span class="fu">sup</span><span class="op">(</span><span class="va">data_sample</span>, <span class="fl">318</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 0.35</span></span></code></pre>
<ul>
<li>
<code>conf()</code> - Used to calculate the confidence level of an
item in the given dataset. This function helps to generate rules
(patterns).</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the confidence value for an item</span></span>
<span><span class="co"># Confidence is the no of transactions with items x and y / no of transactions with item x.</span></span>
<span><span class="va">conf</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">DB</span>, <span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">confidence</span> <span class="op">=</span> <span class="fu">tidsForTwo</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">DB</span><span class="op">)</span> <span class="op">/</span> <span class="fu">tids</span><span class="op">(</span><span class="va">x</span>, <span class="va">DB</span><span class="op">)</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span> <span class="op">(</span><span class="va">confidence</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># The confidence that a user will watch both the movies 'Toy Story' (id = 1) and 'Grumpier' (id=3) is 0.3333.</span></span>
<span><span class="fu">conf</span><span class="op">(</span><span class="va">data_sample</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 0.3333333</span></span></code></pre>
<ul>
<li>
<code>minConf()</code> - Used to calculate the minimum confidence
level. This function helps determine the number of rules generated.</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># A list of items should be parsed into minConf and minSup</span></span>
<span><span class="co"># However, we were unable to implement a tids function that takes in a list. It should be done in the future.</span></span>
<span><span class="co"># Therefore, we used the tidsForTwo function instead.</span></span>
<span><span class="va">minConf</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">DB</span>, <span class="va">searchFor1</span>, <span class="va">searchFor2</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">maxTid</span> <span class="op">=</span> <span class="op">-</span><span class="fl">1</span></span>
<span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">searchFor1</span>, <span class="va">searchFor2</span><span class="op">)</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu">tids</span><span class="op">(</span><span class="va">i</span>, <span class="va">DB</span><span class="op">)</span> <span class="op">&gt;</span> <span class="va">maxTid</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">maxTid</span> <span class="op">=</span> <span class="fu">tids</span><span class="op">(</span><span class="va">i</span>, <span class="va">DB</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu">tidsForTwo</span><span class="op">(</span><span class="va">searchFor1</span>, <span class="va">searchFor2</span>, <span class="va">DB</span><span class="op">)</span><span class="op">/</span><span class="va">maxTid</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">minConf</span><span class="op">(</span><span class="va">data_sample</span>, <span class="fl">260</span>, <span class="fl">318</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 0.6</span></span></code></pre>
<ul>
<li>
<code>minSup()</code> - Used to compute the minimum support value.
This function helps determine the number of rules generated.</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The minSup function calculates the minimum support value.</span></span>
<span><span class="va">minSup</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>   <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu">tids</span><span class="op">(</span><span class="va">x</span>, <span class="va">data</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">minSup</span><span class="op">(</span><span class="fl">1</span>, <span class="va">data_sample</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] 0.45</span></span></code></pre>
<ul>
<li>
<code>SortItems()</code> - Used to sort items in descending order
based on their support values.</li>
</ul>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SortItems</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">DB</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># Define an empty vector</span></span>
<span>  <span class="va">itemsinData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="co"># Store the ids of the items in the database in the empty vector</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="va">DB</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">itemsinData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">itemsinData</span>, <span class="va">i</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="co"># Convert the list of items to a dataframe</span></span>
<span>  <span class="va">new_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">itemsinData</span>,<span class="va">c</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="co"># Rename the column with ids</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">new_df</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">=</span><span class="st">"id"</span></span>
<span>  <span class="co"># This function returns the support value for each item.</span></span>
<span>  <span class="va">func</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">new_df</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">new_df</span><span class="op">$</span><span class="va">id</span>, <span class="kw">function</span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">new_df</span><span class="op">$</span><span class="va">id</span> <span class="op">==</span> <span class="va">id</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">new_df</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="co"># Create a new column that contains the support values of the corresponding items.</span></span>
<span>  <span class="va">new_df</span><span class="op">$</span><span class="va">support</span> <span class="op">&lt;-</span> <span class="fu">func</span><span class="op">(</span><span class="va">new_df</span><span class="op">)</span></span>
<span>  <span class="co"># Sort the items in descending order based on their support values</span></span>
<span>  <span class="va">swapped</span> <span class="op">&lt;-</span> <span class="va">new_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">support</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">swapped</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fu">SortItems</span><span class="op">(</span><span class="va">data_sample</span><span class="op">)</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;       id support</span></span>
<span><span class="co">#&gt; 396  123  0.0025</span></span>
<span><span class="co">#&gt; 397  594  0.0025</span></span>
<span><span class="co">#&gt; 398  595  0.0025</span></span>
<span><span class="co">#&gt; 399  539  0.0025</span></span>
<span><span class="co">#&gt; 400 1204  0.0025</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ol style="list-style-type: decimal">
<li>Liu, X., Niu, X., &amp; Fournier-Viger, P. (2021). Fast top-k
association rule mining using rule generation property pruning. Applied
Intelligence, 51(4), 2077-2093.</li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Sharon Kirwa.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
